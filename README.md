# Video Compressor Service
ユーザーが動画をサーバーにアップロードして、選択したメニューに応じて動画を変換できるクライアントサーバ分散型アプリケーションです。
<p align="center">
  <img src="https://github.com/AkinoJoey/video-compressor-service/assets/124570638/0cb78dc1-52d3-4f24-b72a-672c69ce78ed" />
</p>

## 概要

ユーザーはGUIを通じて、変換したい動画ファイルと希望のメニューを選択します。<br>
サーバーとクライアントはTCPソケットを使って通信を行い、独自のプロトコルを通じて、動画の変換に必要なデータの送受信を行います。<br>
サーバーでは、マルチメディアファイルを変換、処理できる[FFMPEGライブラリ](https://ffmpeg.org/about.html)を使用して、動画の処理を行います。
<br>
<br>
動画の処理が完了次第、サーバーからクライアントに通達され、クライアント側ではダウンロードページが表示されます。<br>
ユーザーはダウンロードボタンを押して、ダウンロードに進むこともできますし、☓ボタンを押してダウンロードをキャンセルすることもできます。<br>
ユーザーがダウンロードを選択した場合は、サーバーは処理後の動画をクライアントに送信します。<br>
ダウンロードされた動画はユーザーのダウンロードフォルダに保存されます。

## 作成の経緯
クライアントサーバアプリケーションを作成していく過程で、サーバ操作の基本を習得したいと思いこのアプリケーションを作成しました。<br>
また、プロトコルの基本概念を把握し、独自の低レベルネットワーキングをアプリケーションに実装する能力を向上させることも目標としました。

## 使用技術
- Client
  - Python
  - Tkinter
  - Threading

- Server
  - Python
  - asyncio
  - subprocess

## 期間
2023年4月14日から約1か月。

## こだわった点
### 非同期処理の利用
サーバーサイドではasyncioライブラリを使用して、非同期処理を実装しました。<br>
これにより同時に複数のクライアントと通信が可能となっています。<br>
また、動画の受信中や変換中にキャンセル処理を受け付けて、キャンセルの要望が合った場合はその時点で動画の受信や、動画の変換をストップできるようにしました。<br>

### 動画を削除するタイミング
ストレージの圧迫を防ぐために、変換後の動画はすぐにサーバー側から削除するようにしました。<br>
ただ、変換前の動画を続けて別の方法で変換したい場合もあるかと思い、変換前の動画はクライアントとの接続が終了したタイミングで削除するようにしました。<br>
これにより、1度動画をアップロードすれば連続して別の処理を続けて行なえます。

### GUIの分離
クライアントサイドではTkinterを使用してGUIを構築し、その部分はViewControllerクラスが担当しています。<br>
ビジネスロジックとUI表示を分離させ、可読性と拡張性を高めるようにしました。

## これからの改善点、拡張案
### Serverクラスの細分化
Serverクラスではサーバーの起動やクライアントとの接続処理以外にも、動画処理も担当しています。<br>
単一責任の原則に従って設計をするために、動画処理の振る舞いのみを担当するクラスを別で用意するべきだなと思いました。

## デモ

## インストール

## 使い方


